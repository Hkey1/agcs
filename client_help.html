<!DOCTYPE html><html lang="ru">
<head>
	<meta charset="utf-8">
	<title>AdGen &mdash; справка к клиентскому скрипту</title>
	<meta property="og:locale" content="ru_RU"/>
	<meta property="og:title" content="Клиентский скрипт AdGen"/>
	<meta property="og:description" content="Подстройка лендинга под ключевые слова с синтаксисом AdGen. Бесплатно." />

	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" />
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css" />
	<link rel="stylesheet" href="https://gitcdn.github.io/bootstrap-toggle/2.2.0/css/bootstrap-toggle.min.css" />
</head>
<body>
	<script src='https://code.jquery.com/jquery-2.1.4.min.js'></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
	<script src="https://gitcdn.github.io/bootstrap-toggle/2.2.0/js/bootstrap-toggle.min.js"></script>
	<script>
		/* http://prismjs.com/download.html?themes=prism&languages=markup+clike+javascript */
		var _self="undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:{},Prism=function(){var e=/\blang(?:uage)?-(?!\*)(\w+)\b/i,t=_self.Prism={util:{encode:function(e){return e instanceof n?new n(e.type,t.util.encode(e.content),e.alias):"Array"===t.util.type(e)?e.map(t.util.encode):e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(e){return Object.prototype.toString.call(e).match(/\[object (\w+)\]/)[1]},clone:function(e){var n=t.util.type(e);switch(n){case"Object":var a={};for(var r in e)e.hasOwnProperty(r)&&(a[r]=t.util.clone(e[r]));return a;case"Array":return e.map&&e.map(function(e){return t.util.clone(e)})}return e}},languages:{extend:function(e,n){var a=t.util.clone(t.languages[e]);for(var r in n)a[r]=n[r];return a},insertBefore:function(e,n,a,r){r=r||t.languages;var i=r[e];if(2==arguments.length){a=arguments[1];for(var l in a)a.hasOwnProperty(l)&&(i[l]=a[l]);return i}var o={};for(var s in i)if(i.hasOwnProperty(s)){if(s==n)for(var l in a)a.hasOwnProperty(l)&&(o[l]=a[l]);o[s]=i[s]}return t.languages.DFS(t.languages,function(t,n){n===r[e]&&t!=e&&(this[t]=o)}),r[e]=o},DFS:function(e,n,a){for(var r in e)e.hasOwnProperty(r)&&(n.call(e,r,e[r],a||r),"Object"===t.util.type(e[r])?t.languages.DFS(e[r],n):"Array"===t.util.type(e[r])&&t.languages.DFS(e[r],n,r))}},plugins:{},highlightAll:function(e,n){for(var a,r=document.querySelectorAll('code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'),i=0;a=r[i++];)t.highlightElement(a,e===!0,n)},highlightElement:function(a,r,i){for(var l,o,s=a;s&&!e.test(s.className);)s=s.parentNode;s&&(l=(s.className.match(e)||[,""])[1],o=t.languages[l]),a.className=a.className.replace(e,"").replace(/\s+/g," ")+" language-"+l,s=a.parentNode,/pre/i.test(s.nodeName)&&(s.className=s.className.replace(e,"").replace(/\s+/g," ")+" language-"+l);var u=a.textContent,g={element:a,language:l,grammar:o,code:u};if(!u||!o)return t.hooks.run("complete",g),void 0;if(t.hooks.run("before-highlight",g),r&&_self.Worker){var c=new Worker(t.filename);c.onmessage=function(e){g.highlightedCode=n.stringify(JSON.parse(e.data),l),t.hooks.run("before-insert",g),g.element.innerHTML=g.highlightedCode,i&&i.call(g.element),t.hooks.run("after-highlight",g),t.hooks.run("complete",g)},c.postMessage(JSON.stringify({language:g.language,code:g.code,immediateClose:!0}))}else g.highlightedCode=t.highlight(g.code,g.grammar,g.language),t.hooks.run("before-insert",g),g.element.innerHTML=g.highlightedCode,i&&i.call(a),t.hooks.run("after-highlight",g),t.hooks.run("complete",g)},highlight:function(e,a,r){var i=t.tokenize(e,a);return n.stringify(t.util.encode(i),r)},tokenize:function(e,n){var a=t.Token,r=[e],i=n.rest;if(i){for(var l in i)n[l]=i[l];delete n.rest}e:for(var l in n)if(n.hasOwnProperty(l)&&n[l]){var o=n[l];o="Array"===t.util.type(o)?o:[o];for(var s=0;s<o.length;++s){var u=o[s],g=u.inside,c=!!u.lookbehind,f=0,h=u.alias;u=u.pattern||u;for(var p=0;p<r.length;p++){var d=r[p];if(r.length>e.length)break e;if(!(d instanceof a)){u.lastIndex=0;var m=u.exec(d);if(m){c&&(f=m[1].length);var y=m.index-1+f,m=m[0].slice(f),v=m.length,k=y+v,b=d.slice(0,y+1),w=d.slice(k+1),N=[p,1];b&&N.push(b);var O=new a(l,g?t.tokenize(m,g):m,h);N.push(O),w&&N.push(w),Array.prototype.splice.apply(r,N)}}}}}return r},hooks:{all:{},add:function(e,n){var a=t.hooks.all;a[e]=a[e]||[],a[e].push(n)},run:function(e,n){var a=t.hooks.all[e];if(a&&a.length)for(var r,i=0;r=a[i++];)r(n)}}},n=t.Token=function(e,t,n){this.type=e,this.content=t,this.alias=n};if(n.stringify=function(e,a,r){if("string"==typeof e)return e;if("Array"===t.util.type(e))return e.map(function(t){return n.stringify(t,a,e)}).join("");var i={type:e.type,content:n.stringify(e.content,a,r),tag:"span",classes:["token",e.type],attributes:{},language:a,parent:r};if("comment"==i.type&&(i.attributes.spellcheck="true"),e.alias){var l="Array"===t.util.type(e.alias)?e.alias:[e.alias];Array.prototype.push.apply(i.classes,l)}t.hooks.run("wrap",i);var o="";for(var s in i.attributes)o+=(o?" ":"")+s+'="'+(i.attributes[s]||"")+'"';return"<"+i.tag+' class="'+i.classes.join(" ")+'" '+o+">"+i.content+"</"+i.tag+">"},!_self.document)return _self.addEventListener?(_self.addEventListener("message",function(e){var n=JSON.parse(e.data),a=n.language,r=n.code,i=n.immediateClose;_self.postMessage(JSON.stringify(t.util.encode(t.tokenize(r,t.languages[a])))),i&&_self.close()},!1),_self.Prism):_self.Prism;var a=document.getElementsByTagName("script");return a=a[a.length-1],a&&(t.filename=a.src,document.addEventListener&&!a.hasAttribute("data-manual")&&document.addEventListener("DOMContentLoaded",t.highlightAll)),_self.Prism}();"undefined"!=typeof module&&module.exports&&(module.exports=Prism),"undefined"!=typeof global&&(global.Prism=Prism);
		Prism.languages.markup={comment:/<!--[\w\W]*?-->/,prolog:/<\?[\w\W]+?\?>/,doctype:/<!DOCTYPE[\w\W]+?>/,cdata:/<!\[CDATA\[[\w\W]*?]]>/i,tag:{pattern:/<\/?[^\s>\/=.]+(?:\s+[^\s>\/=]+(?:=(?:("|')(?:\\\1|\\?(?!\1)[\w\W])*\1|[^\s'">=]+))?)*\s*\/?>/i,inside:{tag:{pattern:/^<\/?[^\s>\/]+/i,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"attr-value":{pattern:/=(?:('|")[\w\W]*?(\1)|[^\s>]+)/i,inside:{punctuation:/[=>"']/}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:/&#?[\da-z]{1,8};/i},Prism.hooks.add("wrap",function(a){"entity"===a.type&&(a.attributes.title=a.content.replace(/&amp;/,"&"))}),Prism.languages.xml=Prism.languages.markup,Prism.languages.html=Prism.languages.markup,Prism.languages.mathml=Prism.languages.markup,Prism.languages.svg=Prism.languages.markup;
		Prism.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\w\W]*?\*\//,lookbehind:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0}],string:/("|')(\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,"class-name":{pattern:/((?:\b(?:class|interface|extends|implements|trait|instanceof|new)\s+)|(?:catch\s+\())[a-z0-9_\.\\]+/i,lookbehind:!0,inside:{punctuation:/(\.|\\)/}},keyword:/\b(if|else|while|do|for|return|in|instanceof|function|new|try|throw|catch|finally|null|break|continue)\b/,"boolean":/\b(true|false)\b/,"function":/[a-z0-9_]+(?=\()/i,number:/\b-?(?:0x[\da-f]+|\d*\.?\d+(?:e[+-]?\d+)?)\b/i,operator:/--?|\+\+?|!=?=?|<=?|>=?|==?=?|&&?|\|\|?|\?|\*|\/|~|\^|%/,punctuation:/[{}[\];(),.:]/};
		Prism.languages.javascript=Prism.languages.extend("clike",{keyword:/\b(as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|false|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|true|try|typeof|var|void|while|with|yield)\b/,number:/\b-?(0x[\dA-Fa-f]+|0b[01]+|0o[0-7]+|\d*\.?\d+([Ee][+-]?\d+)?|NaN|Infinity)\b/,"function":/[_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*(?=\()/i}),Prism.languages.insertBefore("javascript","keyword",{regex:{pattern:/(^|[^/])\/(?!\/)(\[.+?]|\\.|[^/\\\r\n])+\/[gimyu]{0,5}(?=\s*($|[\r\n,.;})]))/,lookbehind:!0}}),Prism.languages.insertBefore("javascript","class-name",{"template-string":{pattern:/`(?:\\`|\\?[^`])*`/,inside:{interpolation:{pattern:/\$\{[^}]+\}/,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:Prism.languages.javascript}},string:/[\s\S]+/}}}),Prism.languages.markup&&Prism.languages.insertBefore("markup","tag",{script:{pattern:/<script[\w\W]*?>[\w\W]*?<\/script>/i,inside:{tag:{pattern:/<script[\w\W]*?>|<\/script>/i,inside:Prism.languages.markup.tag.inside},rest:Prism.languages.javascript},alias:"language-javascript"}}),Prism.languages.js=Prism.languages.javascript;
	</script>
	
	<style>
		code{
			white-space:nowrap;
		    background-color: #f1f1f1;
			color: #333;
		}	
		code[class*="language-"],
		pre[class*="language-"] {
			color: black;
			text-shadow: 0 1px white;
			font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
			direction: ltr;
			text-align: left;
			white-space: pre;
			word-spacing: normal;
			word-break: normal;
			word-wrap: normal;
			line-height: 1.5;

			-moz-tab-size: 4;
			-o-tab-size: 4;
			tab-size: 4;

			-webkit-hyphens: none;
			-moz-hyphens: none;
			-ms-hyphens: none;
			hyphens: none;
		}

pre[class*="language-"]::-moz-selection, pre[class*="language-"] ::-moz-selection,
code[class*="language-"]::-moz-selection, code[class*="language-"] ::-moz-selection {
	text-shadow: none;
	background: #b3d4fc;
}

pre[class*="language-"]::selection, pre[class*="language-"] ::selection,
code[class*="language-"]::selection, code[class*="language-"] ::selection {
	text-shadow: none;
	background: #b3d4fc;
}

@media print {
	code[class*="language-"],
	pre[class*="language-"] {
		text-shadow: none;
	}
}

/* Code blocks */
pre[class*="language-"] {
	padding: 1em;
	margin: .5em 0;
	overflow: auto;
}

:not(pre) > code[class*="language-"],
pre[class*="language-"] {
	background: #f5f2f0;
}

/* Inline code */
:not(pre) > code[class*="language-"] {
	padding: .1em;
	border-radius: .3em;
}

.token.comment,
.token.prolog,
.token.doctype,
.token.cdata {
	color: slategray;
}

.token.punctuation {
	color: #999;
}

.namespace {
	opacity: .7;
}

.token.property,
.token.tag,
.token.boolean,
.token.number,
.token.constant,
.token.symbol,
.token.deleted {
	color: #905;
}

.token.selector,
.token.attr-name,
.token.string,
.token.char,
.token.builtin,
.token.inserted {
	color: #690;
}

.token.operator,
.token.entity,
.token.url,
.language-css .token.string,
.style .token.string {
	color: #a67f59;
	background: hsla(0, 0%, 100%, .5);
}

.token.atrule,
.token.attr-value,
.token.keyword {
	color: #07a;
}

.token.function {
	color: #DD4A68;
}

.token.regex,
.token.important,
.token.variable {
	color: #e90;
}

.token.important,
.token.bold {
	font-weight: bold;
}
.token.italic {
	font-style: italic;
}

.token.entity {
	cursor: help;
}
	</style>
	
	<div class="row"><div class="col-md-2"></div><div class="col-md-8">
		<br /><br />
		<h1>Справка к клиентскому скрипту AdGen (AdGenCS)</h1>
		<p>
			AdGenCS позволяет подстроить ваш сайт под запросы пользователя. 
			Например, 
			<ul>
				<li>если пользователь искал <i>ноутбуки недорого</i>, то вывести ему заголовок <i>Недорогие ноутбуки</i></li>
				<li>если пользователь искал <i>ноутбуки игровые</i>, то <i>Игровые ноутбуки</i></li>
				<li>если пользователь искал <i>недорогие ноутбуки игровые</i>, то <i>Недорогие игровые ноутбуки</i></li>
				<li>и так далее</li>
			</ul>	
		</p>
		<p>
			Этот метод намного быстрее создание мультилендингов (разные страницы под разные ключевые слова).
			С помощью AdGenCS вы можете за час сделать несколько тысяч вариаций одного лендинга. 
			В отличии от сервисов вроде Ягла, AdGenCS бесплатное и более фунциональное решение. 
		</p>
		<p>
			Однако, и более сложное.
		</p>
		<ul>
			<li>Совместимость с AdGen 1 в 1</li>
			<li>Простой, но мощный синтаксис</li>
			<li>Совместимость с Директом и AdWords, даже если кампании созданы не через AdGen</li>
			<li>Поддержка русской морфологии</li>
			<li>HTML-валидный код</li>
			<li>SEO-friendly</li>
			<li>Всего 25 килобайт</li>
			<li>Поддержка морфрологии (стемминг)</li>
			<li>Защита от XXS атак</li>
			<li>100% JavaScript. Полностью исполняется в браузере пользователя. Без Ajax.</li>
		</ul>
		<br /><h2>Установка</h2>
		<ul>
			<li>
				Нужно подключить скрипт к HTML коду страницы.
				Подключается он также как и любой другой файл js:
				<ul>
					<li>Скачайте и распакуйте <a href="http://htraffic.ru/adgen/client/adgen_cs_ru.rar">этот архив</a></li>
					<li>
						Поместите файл <code>adgen_ru.min.js</code> в корень диска. Обычно <code>www</code> или <code>public_html</code>.
					</li>
					<li>
						Проверьте открывается ли страница <code>http://SITE.COM/adgen_ru.min.js</code>, где SITE.COM это ваш домен.
					</li>
					<li>
						И вставьте этот этот в начало страницы. Например, после открывающегося тега body. 
<pre><code class="language-markup">&lt;script type="text/javascript"> 
&lt;script type="text/javascript">&lt;![CDATA[
		//Эти опции позволяют изменить текст ключевика
			//window.ag_keyword            = '';    // Текст ключа. Если пустая строка, то он определяется автоматически. Для теста можно задать какой-то 
			//window.ag_keyword_addon      = '';    // Что добавлять к тексту ключа. Например, можно добавить маркеры взависимости от ОС пользователя. К пустому ключевику не добавляется.
			//window.ag_default_keyword    = '';	// Ключевик по умолчанию, если автоматический ключевик пуст, то используется ключевик по умолчанию

		//Эти опции установлены по умолчанию в false, чтобы их изменить разкоментируйте строку 
			//window.ag_do_if_void         		= true; // Выполнять код, если ключевик пуст
			//window.ag_disable_storage    		= true; // Отключить сохранение ключа	
			//window.ag_detect_yd_query    		= true; // Поддержка запроса для Яндекс.Директ
			//window.ag_detect_by_referrer 		= true; // Иногда может поправить ошибку возникающую из-за редиректов, когда после редиректа ключ не определяется.
			//window.ag_disable_anti_xss   		= true; // Выключить защиту от XSS атак. Крайне не рекомендуется.	
			//window.ag_add_markers        		= true; // Добавлять ли маркеры устройства, времени и источника трафика
			
		window.ag_timezone_offset  = 3;//часовой пояс (+3 Москва)
		window.ag_worktime   	   = { //время работы
			'mon':[8,20], //понедельник
			'tue':[8,20], //вторник
			'wed':[8,20], //среда
			'thu':[8,20], //четверг
			'fri':[8,20], //пятница
			'sat':[-1,-1], //суббота
			'sun':[-1,-1]  //воскресенье
		};//*/	
]]>&lt;/script>
&lt;script type="text/javascript" src="http://SITE.COM/adgen_ru.min.js">&lt;/script>
</code></pre>  

					</li>
					<li>
						Замените в коде подключения SITE.COM на ваш домен.
					</li>
				</ul>
			</li>
			<li>
				Теперь нужно добавить в URL посадочной страниц get параметр <code>_adgenkey</code> равный ключевому слову.
				<ul>
					<li>
						Если вы используете AdGen, то нужно просто включить соответсвующую опцию.
						В этом случае, вам будут доступны все маркеры и переменные из AdGen в клиентском скрипте.
					</li>
					<li>В противном случае В AdWords и Директе нужно ко всем ссылкам, в которвых нет символа <code>?</code> добавить <code>?_adgenkey={keyword}</code>, а к остальным &mdash; <code>&_adgenkey={keyword}</code></li>
					<li>
						В Директе есть и альтернативный способ &mdash; в коде подключения раскоментируйте строку содержащую <code>ag_detect_yd_query</code>. 
						Однако, это будет действовать только на поиске Директа и вместо ключевого слово будет проверяться запрос пользователя.
					</li>
				</ul>
			</li>
			<li>
				В редких случаях, когда движок сайта подгружает новые страницы страницы через Ajax, то на них код AdGen не будет испольняться.
				Чтобы исправить это &mdash; раскоментируйте в коде подключения строку содержащую ag_dont_stop. 
			</li>
		</ul>
		<br /><h2>Синтаксис</h2>
		<p>
			AdGenCS обладает простым, но мощным синтаксисом. 
		</p>
		<p>
			Например, <code>@{недорого=>недорогие|дешево=>дешевые} ноутбуки</code> сгенерирует один из трех вариантов:
			<ul>
				<li><i>недорогие ноутбуки</i> если в ключевике было слово недорого</li>
				<li><i>дешевые ноутбуки</i> если в ключевике было слово дешево и не было недорого</li>
				<li><i>ноутбуки</i> если в ключевике не было слов дешево и недорого</li>
			</ul>
		</p>
		<p>
			Другой пример. <code>@{недорого=>недорогие} @{игровые=>игровые} ноутбуки</code> сгенерирует один из 4ех вариантов:
			<ul>
				<li><i>недорогие игровые ноутбуки</i> если в ключевике были оба слова и недорого и игровые</li>
				<li><i>недорогие ноутбуки</i> если в ключевике было слово недорого, но не было игровые</li>
				<li><i>игровые ноутбуки</i> если в ключевике было слово игровые, но не было недорого</li>
				<li><i>ноутбуки</i> если в ключевике  не было слов игровые и недорого</li>
			</ul>
		</p>
		
		<p>
			Вы можете проверять наличие нескольких слов одновременно. Прошлый пример можно записать так:
<pre>
    @{
	    недорого игровые => недорогие игровые	|
	    недорого         => недорогие           |
	    игровые          => игровые
    }
    ноутбуки	
</pre>
		</p>
		<p>
			Другой пример:
<pre>
    квартиры
    @{
        одесса центр  => в самом центре Одессы	|
        одесса        => в Одессе
    }
</pre>
			<ul>
				<li><i>квартиры в самом центре Одессы</i> если в ключевике были оба слова и одесса и центр</li>
				<li><i>квартиры в Одессе</i> если в ключевике было слово одесса, но не было центр</li>
				<li><i>квартиры</i> если в ключевике не было слов одесса и центр</li>
			</ul>
		</p>
		<p>
			Вы можете проверять на отсутствие слов. Для этого нужно добавить минус перед словом. Например, <code>@{-недорого => в ключе не было слова недорого}</code>.
		</p>
		<p>
			Также существует оператор отключения морфологии, как и в Директе `!`. 
			В общем синтаксис селектора (перед =>) AdGen очень похож на синтаксис ключевого слова в Директе.
		</p>
		<p>
			Вы можете проверять присутствие одного из нескольких слова с помощью оператора <code>*{...|...}</code>.
			Например, <code>@{*{недорого|дешево} => недорогие}</code>вернет недорогие, когда в ключевике есть одно из слов или недорого или дешево.
		</p>
		<p>Синтаксис более подробно описан в <a href="http://htraffic.ru/adgen/">справке AdGen</a>.</p>
		
		<br /><h2>Использование</h2>
		<p>Вставка кода в HTML происходит так:</p>
		<pre><code class="language-markup">&lt;any_tag>
        Текст по умолчанию. 
        Его видят поисковые роботы и пользователи, если параметр _adgenkey не задан в URL.
        Грубо говоря это текст который был до AdGen.
&lt;/any_tag>
&lt;script type="text/adgen" data-to="$prev" data-filters="uc_first fix_punct">&lt;![CDATA[
        Код AdGen. Например: 
        @{недорого=>недорогие|лучшие=>хорошие} ноутбуки
        Если есть параметр _adgenkey в URL, то результат этого выполнение этого кода запищеться в приведущий тег.   
]]>&lt;/script></code></pre>	
	Например:
	<pre><code class="language-markup">&lt;h1>Ноутбуки&lt;/h1>&lt;script type="text/adgen" data-to="$prev" data-filters="uc_first fix_punct">&lt;![CDATA[
        @{недорого => недорогие | лучшие => хорошие}
        @{нетбуки  => нетбуки   | => ноутбуки}
        @{одесса  => с доставкой по Одессе}
]]>&lt;/script></code></pre>	
		<br />
		<br /><h2>Отладка</h2>
		<p>
			Вы можете отладить свой код на вкладке "Песочница" в <a href="http://htraffic.ru/adgen/#">AdGen</a>.
			Там есть подсветка синтаксиса и возможность задать произвольное ключевое слово.
		</p>
		
		<br /><h2>Маркеры</h2>
		<p>
			Кроме слов система может проверять на наличие маркеров.
			Это делается точно также как и проверка слов, но перед маркером пишется вопросительный знак.
			<code>@{?маркер1 => был маркер1|=>не было маркера1}</code>
		</p>
		<p>
			Вы можете проверять на отсутсвие маркера просто добавив перед его именем минус.
			Также можно проверять одновременно на ключевые слова и маркеры.
		</p>
		<p>
			Если вы раскоментируете в коде подключения строку <code>window.ag_add_markers=true;</code>, 
			то AdGen будет автоматически добавлять маркеры относящиеся ко времени, устройству или источнику перехода.
		</p>
		<p>
			Обратите внимание на то, что код исполняется только в том случае, если удалось определить ключевик пользователя.
			Чтобы ваш код исполнялся даже в том случае когда ключевик не удалось определить, нужно раскоментировать строку <code>window.ag_do_if_void=true;</code> в коде подключения.
		</p>
		<table class="table table-bordered table-hover"><tbody>
			<tr>
				<th colspan="2">Дата и время</th>
			</tr>
			<tr>
				<td><i><b>?с_*</b></i></td>
				<td>Маркеры с этим префиксом работают по "серверному времени". Время по часовому поясу заданному в настройках.</td>
			</tr>
			<tr>
				<td>?с_ч0 &mdash; ?с_ч23</td>
				<td>Час по серверному времени. Например, ?с_ч0 значит что сейчас от 0:00 до 0:59</td>
			</tr>
			<tr>
				<td>?с_ночь</td>
				<td>Ночь ли сейчас по серверному времени. Если маркер сработал, то сейчас от 23:00 до 6:59</td>
			</tr>
			<tr>
				<td>?с_день</td>
				<td>День ли сейчас по серверному времени. Если маркер сработал, то сейчас от 7:00 до 17:59</td>
			</tr>
			<tr>
				<td>?с_вечер</td>
				<td>День ли сейчас по серверному времени. Если маркер сработал, то сейчас от 18:00 до 22:59</td>
			</tr>
			<tr>
				<td>?с_понедельник, ?с_вторник, ...</td>
				<td></td>
			</tr>
			<tr>
				<td>?с_выходной</td>
				<td>Суббота или вск по серверному времени. Если маркер сработал, то сейчас от 18:00 до 22:59</td>
			</tr>
			<tr>
				<td>?с_рабочее_время</td>
				<td>Рабочее сейчас ли время. График работы задается в коде подключения.</td>
			</tr>
			<tr>
				<td><i><b>?п_*</b></i></td>
				<td>Маркеры с этим префиксом работают по времени пользователя (в его часовом поясе). Есть все маркеры которые есть префиксом  'с_' </td>
			</tr>
			<tr>
				<th colspan="2">Устройство</th>
			</tr>
			<tr>
				<td>?виндовс</td>
				<td>Windows ли у пользователя (в том числе или Windows Phone и Windows Touch).</td>
			</tr>
			<tr>
				<td>?андроид</td>
				<td>Андроид ли у пользователя.</td>
			</tr>
			<tr>
				<td>?блекберри</td>
				<td>Блекберри ли у пользователя.</td>
			</tr>
			<tr>
				<td>?айос</td>
				<td>Айфон или апод или айпад.</td>
			</tr>
			<tr>
				<td>?айфон</td>
				<td></td>
			</tr>
			<tr>
				<td>?айпад</td>
				<td></td>
			</tr>
			<tr>
				<td>?айпод</td>
				<td></td>
			</tr>
			<tr>
				<td>?телефон</td>
				<td>Мобильный телефон смартфон</td>
			</tr>
			<tr>
				<td>?планшет</td>
				<td>Планшет ли у пользователя</td>
			</tr>
			<tr>
				<td>?десктоп</td>
				<td>Стационарный компьютер</td>
			</tr>
			<tr>
				<th colspan="2">Источник трафика</th>
			</tr>
			<tr>
				<td>?емайл</td>
				<td>Переход в письма. Определяется только по UTM</td>
			</tr>
			<tr>
				<td>?внутренний</td>
				<td>Переход по внутренней ссылке. Обычно возникает при отключение хранилища в настройках или очень старых браузерах.</td>
			</tr>
			<tr>
				<td>?платный</td>
				<td>Переход с какой-то рекламы</td>
			</tr>
			<tr>
				<td>?ядирект</td>
				<td>Яндекс.Директ (рся или поиск)</td>
			</tr>
			<tr>
				<td>?яндекс</td>
				<td>Поиск Яндекса (органика или Директ)</td>
			</tr>
			<tr>
				<td>?адвордс</td>
				<td>AdWords</td>
			</tr>
			
			<tr>
				<td>?гугл</td>
				<td>Поиск Гугла (органика или AdWords)</td>
			</tr>
			<tr>
				<td>?фейсбук</td>
				<td></td>
			</tr>
			
			<tr>
				<td>?вконтакте</td>
				<td></td>
			</tr>
			<tr>
				<td>?cоцсеть</td>
				<td>фейсбук или вконтакте</td>
			</tr>
			<tr>
				<td>?поиск</td>
				<td>поиск Яндекса или Гугл</td>
			</tr>
			<tr>
				<td>?прямой</td>
				<td>Прямой переход. Либо из закладки в браузере либо набор в адресную строку</td>
			</tr>
		</tbody></table>
		<pre><code class="language-markup">
    &lt;p>Время работы c 8:00 до 20:00 без выходных&lt;/p>&lt;script type="text/adgen" data-to="$prev" data-filters="uc_first fix_punct">&lt;![CDATA[
	    @{
		    ?с_рабочее_время => Мы сейчас работаем. &lt;b>Звоните!&lt;/b> | 
			                 => Мы сейчас не работаем. &lt;a>Оставьте заявку&lt;/a> и утром мы с вами свяжемся!
        }
    ]]>&lt;/script>
		</code></pre>
		<br /><h2>Продвинутое использование</h2>
		<p>
			Есть две настройки, они задаются в атрибутах тега script в котором вы пишите код AdGen.
			<ul>
				<li>
					<b>data-to</b> &mdash; куда записать результат выполнения кода.
					<ul>
						<li><i>$prev</i> &mdash;  в прошлый тег.</li>
						<li><i>#someID</i> &mdash;  в тег с id равным someID.</li>
						<li>Можно использовать любой css селектор. Например, <code>.class[attr="value"]</code></li>
					</ul>
				</li>
				<li>
					<b>data-filters</b> &mdash; фильтры, которыми обрабатывается итоговый код. Содержит список фильтров через пробел.
					<ul>
						<li><i>uc_first</i> &mdash; первая буква большая.</li>
						<li><i>fix_punct</i> &mdash; исправлять ошибки пунктуации.</li>
					</ul>
				</li>
			</ul>
		</p>
		
		
		<br /><h3>Свои маркеры</h3>
		<p>
			Вы можете добавить свои маркеры в коде подключения <code>window.ag_keyword_addon      = '?маркер1 ?маркер2';</code>;
		</p>
		<p>
			Генерить маркеры можно с помощью PHP.
			Таким образом можно добавить, например, маркер региона, определенного из IP.
		</p>
		
		<br /><h3>Использование в JavaScript</h3>
		<p>
			Вы можете выполнить код AdGen в JavaScript так: <code>var str = AdGen.get(code,filters);</code>
		</p>

		<br /><h2>SEO</h2>
		<p>
			Замена текста происходит примерно также как и в Google WebSite Optimizator.
			Код AdGen не индексируется, поскольку он внутри тега Script.
			Текст по умолчанию индексируется также как и раньше.
			В общем, добавления AdGen не изменяет в глазах поискового робота текст страницы.
		</p>
		<p>
			Поисковый робот не сможет никак определить смену текста, поскольку они могут испольнять только очень простой JavaScript код.
			Наложение ручных фильтров тоже невозможно поскольку вы не используете смену текста, чтобы обмануть поисковик.
		</p>
		<br /><h4>Для параноиков</h4>
		<p>
			На страницах в URL которых нет _adgenkey при настройках по умолчанию, тексты отображаемые пользователю и поисковмому роботу совпадают.		
			Если вы запретите индексацию страниц с _adgenkey или зададите им canonical, то в индексе не будет ни одной страницы с подменой. 
			Таким образом, на всех страницах индекса тексты отображаемые пользователю и роботу будут совпадать.
		</p>
		<br /><h2>Загрузка документа</h2>
		<p>
			Если код подключения указан в начале страницы и аттрибут data-to равен $prev или #someId, то подмена текста проходит происходит динамически. 
			В течении 1/20 секунды с момента появления элемента на странице.
			Примерно такой-же частотой, что и кадры в фильмах. 
		</p>
		<p>
			Заметить то, что подмена произошла, а, тем более, прочитать текст по-умолчанию пользователь физически не может.
			Поэтому с помощью этого скрипта можно производить любые замены вплоть до ценовой дискриминации.
		</p>
		<br /><br />
	</div></div>
</body></html>
	